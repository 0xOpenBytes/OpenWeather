//
//  OpenWeather template generated by OpenBytes on 30/04/2023.
//
// Created by Ahmed Shendy.
//  DatabaseService.swift
//

import Foundation
import Combine

enum DatabaseError: Error {
    case invalidColumnCount
    case missingColumn(String)
}

protocol DatabaseService {
    func tableExists(_ name: String) async throws -> Bool
    func columns(in name: String) async throws -> [String]

    // Favorites Table
    func favoriteExists(_ location: DeviceLocation) async throws -> Bool
    func fetchOneFavorite(_ location: DeviceLocation) async throws -> DeviceLocation?
    func fetchAllFavorites() async throws -> [DeviceLocation]
    func fetchAllFavoritesPublisher() -> AnyPublisher<[DeviceLocation], Error>
    func fetchAllFavorites(matching locations: [DeviceLocation]) async throws -> [DeviceLocation]
    func insertOneFavorite(_ location: DeviceLocation) async throws
    func deleteOneFavorite(_ location: DeviceLocation) async throws
}
